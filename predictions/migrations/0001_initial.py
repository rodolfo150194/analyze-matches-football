# Generated by Django 6.0 on 2025-12-21 21:25

import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Competition',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('api_id', models.IntegerField(blank=True, db_index=True, null=True, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(db_index=True, max_length=20)),
                ('country', models.CharField(max_length=100)),
                ('current_season', models.IntegerField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Competition',
                'verbose_name_plural': 'Competitions',
                'db_table': 'competitions',
            },
        ),
        migrations.CreateModel(
            name='Team',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('api_id', models.IntegerField(blank=True, db_index=True, null=True, unique=True)),
                ('name', models.CharField(max_length=200)),
                ('short_name', models.CharField(max_length=50)),
                ('tla', models.CharField(max_length=10)),
                ('crest_url', models.URLField(blank=True, max_length=500, null=True)),
                ('competition', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='teams', to='predictions.competition')),
            ],
            options={
                'verbose_name': 'Team',
                'verbose_name_plural': 'Teams',
                'db_table': 'teams',
            },
        ),
        migrations.CreateModel(
            name='Match',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('api_id', models.IntegerField(blank=True, db_index=True, null=True, unique=True)),
                ('season', models.IntegerField(db_index=True)),
                ('matchday', models.IntegerField(blank=True, null=True)),
                ('utc_date', models.DateTimeField(db_index=True)),
                ('status', models.CharField(choices=[('SCHEDULED', 'Scheduled'), ('FINISHED', 'Finished'), ('POSTPONED', 'Postponed'), ('CANCELLED', 'Cancelled'), ('IN_PLAY', 'In Play')], default='SCHEDULED', max_length=20)),
                ('home_score', models.IntegerField(blank=True, null=True)),
                ('away_score', models.IntegerField(blank=True, null=True)),
                ('home_score_ht', models.IntegerField(blank=True, null=True)),
                ('away_score_ht', models.IntegerField(blank=True, null=True)),
                ('shots_home', models.IntegerField(blank=True, null=True)),
                ('shots_away', models.IntegerField(blank=True, null=True)),
                ('shots_on_target_home', models.IntegerField(blank=True, null=True)),
                ('shots_on_target_away', models.IntegerField(blank=True, null=True)),
                ('shots_off_target_home', models.IntegerField(blank=True, null=True)),
                ('shots_off_target_away', models.IntegerField(blank=True, null=True)),
                ('shots_blocked_home', models.IntegerField(blank=True, null=True)),
                ('shots_blocked_away', models.IntegerField(blank=True, null=True)),
                ('corners_home', models.IntegerField(blank=True, null=True)),
                ('corners_away', models.IntegerField(blank=True, null=True)),
                ('yellow_cards_home', models.IntegerField(blank=True, null=True)),
                ('yellow_cards_away', models.IntegerField(blank=True, null=True)),
                ('red_cards_home', models.IntegerField(blank=True, null=True)),
                ('red_cards_away', models.IntegerField(blank=True, null=True)),
                ('fouls_home', models.IntegerField(blank=True, null=True)),
                ('fouls_away', models.IntegerField(blank=True, null=True)),
                ('offsides_home', models.IntegerField(blank=True, null=True)),
                ('offsides_away', models.IntegerField(blank=True, null=True)),
                ('possession_home', models.IntegerField(blank=True, null=True)),
                ('possession_away', models.IntegerField(blank=True, null=True)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='matches', to='predictions.competition')),
                ('away_team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='away_matches', to='predictions.team')),
                ('home_team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='home_matches', to='predictions.team')),
            ],
            options={
                'verbose_name': 'Match',
                'verbose_name_plural': 'Matches',
                'db_table': 'matches',
            },
        ),
        migrations.CreateModel(
            name='HeadToHead',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('calculated_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('total_matches', models.IntegerField(default=0)),
                ('team1_wins', models.IntegerField(default=0)),
                ('team2_wins', models.IntegerField(default=0)),
                ('draws', models.IntegerField(default=0)),
                ('team1_goals', models.IntegerField(default=0)),
                ('team2_goals', models.IntegerField(default=0)),
                ('recent_matches', models.TextField(blank=True, null=True)),
                ('team1', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='h2h_as_team1', to='predictions.team')),
                ('team2', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='h2h_as_team2', to='predictions.team')),
            ],
            options={
                'verbose_name': 'Head to Head',
                'verbose_name_plural': 'Head to Head',
                'db_table': 'head_to_head',
            },
        ),
        migrations.CreateModel(
            name='TeamStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('season', models.IntegerField()),
                ('calculated_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('matches_played', models.IntegerField(default=0)),
                ('wins', models.IntegerField(default=0)),
                ('draws', models.IntegerField(default=0)),
                ('losses', models.IntegerField(default=0)),
                ('goals_for', models.IntegerField(default=0)),
                ('goals_against', models.IntegerField(default=0)),
                ('home_matches', models.IntegerField(default=0)),
                ('home_wins', models.IntegerField(default=0)),
                ('home_draws', models.IntegerField(default=0)),
                ('home_losses', models.IntegerField(default=0)),
                ('home_goals_for', models.IntegerField(default=0)),
                ('home_goals_against', models.IntegerField(default=0)),
                ('away_matches', models.IntegerField(default=0)),
                ('away_wins', models.IntegerField(default=0)),
                ('away_draws', models.IntegerField(default=0)),
                ('away_losses', models.IntegerField(default=0)),
                ('away_goals_for', models.IntegerField(default=0)),
                ('away_goals_against', models.IntegerField(default=0)),
                ('form_points', models.FloatField(default=0)),
                ('form_goals_for', models.FloatField(default=0)),
                ('form_goals_against', models.FloatField(default=0)),
                ('avg_goals_for', models.FloatField(default=0)),
                ('avg_goals_against', models.FloatField(default=0)),
                ('clean_sheets', models.IntegerField(default=0)),
                ('failed_to_score', models.IntegerField(default=0)),
                ('btts_count', models.IntegerField(default=0)),
                ('over_25_count', models.IntegerField(default=0)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='predictions.competition')),
                ('team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='stats', to='predictions.team')),
            ],
            options={
                'verbose_name': 'Team Statistics',
                'verbose_name_plural': 'Team Statistics',
                'db_table': 'team_stats',
            },
        ),
        migrations.CreateModel(
            name='Prediction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('prob_home', models.FloatField()),
                ('prob_draw', models.FloatField()),
                ('prob_away', models.FloatField()),
                ('prob_over_25', models.FloatField(blank=True, null=True)),
                ('prob_btts', models.FloatField(blank=True, null=True)),
                ('predicted_corners', models.FloatField(blank=True, null=True)),
                ('prob_over_95_corners', models.FloatField(blank=True, null=True)),
                ('prob_over_105_corners', models.FloatField(blank=True, null=True)),
                ('predicted_shots', models.FloatField(blank=True, null=True)),
                ('predicted_shots_on_target', models.FloatField(blank=True, null=True)),
                ('model_version', models.CharField(blank=True, max_length=50, null=True)),
                ('match', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='predictions', to='predictions.match')),
            ],
            options={
                'verbose_name': 'Prediction',
                'verbose_name_plural': 'Predictions',
                'db_table': 'predictions',
                'indexes': [models.Index(fields=['match', 'created_at'], name='predictions_match_i_e2d28a_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='match',
            index=models.Index(fields=['competition', 'season', 'home_team', 'away_team'], name='matches_competi_4363cb_idx'),
        ),
        migrations.AddIndex(
            model_name='match',
            index=models.Index(fields=['status', 'utc_date'], name='matches_status_fcc435_idx'),
        ),
        migrations.AddIndex(
            model_name='headtohead',
            index=models.Index(fields=['team1', 'team2'], name='head_to_hea_team1_i_f1c430_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='headtohead',
            unique_together={('team1', 'team2')},
        ),
        migrations.AddIndex(
            model_name='teamstats',
            index=models.Index(fields=['team', 'season'], name='team_stats_team_id_4d20de_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='teamstats',
            unique_together={('team', 'competition', 'season')},
        ),
    ]
