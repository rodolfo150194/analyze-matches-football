# Generated by Django 6.0 on 2025-12-25 17:03

import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('predictions', '0006_match_xg_away_match_xg_home_teamstats_avg_xg_against_and_more'),
    ]

    operations = [
        migrations.CreateModel(
            name='Player',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('api_id', models.IntegerField(blank=True, db_index=True, null=True, unique=True)),
                ('fbref_id', models.CharField(blank=True, db_index=True, max_length=50, null=True)),
                ('transfermarkt_id', models.IntegerField(blank=True, db_index=True, null=True)),
                ('sofascore_id', models.IntegerField(blank=True, db_index=True, null=True)),
                ('name', models.CharField(max_length=200)),
                ('short_name', models.CharField(max_length=100)),
                ('nationality', models.CharField(blank=True, max_length=100, null=True)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('position', models.CharField(max_length=20)),
                ('position_detail', models.CharField(blank=True, max_length=50, null=True)),
                ('height_cm', models.IntegerField(blank=True, null=True)),
                ('weight_kg', models.IntegerField(blank=True, null=True)),
                ('foot', models.CharField(blank=True, max_length=10, null=True)),
                ('market_value_eur', models.IntegerField(blank=True, null=True)),
                ('contract_expires', models.DateField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('team', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='players', to='predictions.team')),
            ],
            options={
                'verbose_name': 'Player',
                'verbose_name_plural': 'Players',
                'db_table': 'players',
            },
        ),
        migrations.CreateModel(
            name='MatchPlayerStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('started', models.BooleanField(default=False)),
                ('minutes_played', models.IntegerField(default=0)),
                ('position', models.CharField(max_length=20)),
                ('goals', models.IntegerField(default=0)),
                ('assists', models.IntegerField(default=0)),
                ('rating', models.FloatField(blank=True, help_text='SofaScore rating (1-10)', null=True)),
                ('xg', models.FloatField(blank=True, null=True)),
                ('shots', models.IntegerField(default=0)),
                ('shots_on_target', models.IntegerField(default=0)),
                ('passes_completed', models.IntegerField(default=0)),
                ('passes_attempted', models.IntegerField(default=0)),
                ('tackles', models.IntegerField(default=0)),
                ('interceptions', models.IntegerField(default=0)),
                ('yellow_card', models.BooleanField(default=False)),
                ('red_card', models.BooleanField(default=False)),
                ('match', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='player_performances', to='predictions.match')),
                ('team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='predictions.team')),
                ('player', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='match_stats', to='predictions.player')),
            ],
            options={
                'verbose_name': 'Match Player Statistics',
                'verbose_name_plural': 'Match Player Statistics',
                'db_table': 'match_player_stats',
            },
        ),
        migrations.CreateModel(
            name='PlayerInjury',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('injury_type', models.CharField(blank=True, max_length=200, null=True)),
                ('status', models.CharField(choices=[('Injured', 'Injured'), ('Doubtful', 'Doubtful'), ('Suspended', 'Suspended'), ('Recovered', 'Recovered')], max_length=20)),
                ('injury_date', models.DateField()),
                ('expected_return_date', models.DateField(blank=True, null=True)),
                ('actual_return_date', models.DateField(blank=True, null=True)),
                ('matches_missed', models.IntegerField(default=0)),
                ('player', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='injuries', to='predictions.player')),
            ],
            options={
                'verbose_name': 'Player Injury',
                'verbose_name_plural': 'Player Injuries',
                'db_table': 'player_injuries',
            },
        ),
        migrations.CreateModel(
            name='PlayerStats',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('season', models.IntegerField(db_index=True)),
                ('matches_played', models.IntegerField(default=0)),
                ('minutes_played', models.IntegerField(default=0)),
                ('starts', models.IntegerField(default=0)),
                ('goals', models.IntegerField(default=0)),
                ('assists', models.IntegerField(default=0)),
                ('penalties_scored', models.IntegerField(default=0)),
                ('penalties_attempted', models.IntegerField(default=0)),
                ('xg', models.FloatField(default=0)),
                ('npxg', models.FloatField(default=0, help_text='Non-Penalty xG')),
                ('xa', models.FloatField(default=0, help_text='Expected Assists')),
                ('shots_total', models.IntegerField(default=0)),
                ('shots_on_target', models.IntegerField(default=0)),
                ('shot_accuracy_pct', models.FloatField(default=0)),
                ('passes_completed', models.IntegerField(default=0)),
                ('passes_attempted', models.IntegerField(default=0)),
                ('pass_completion_pct', models.FloatField(default=0)),
                ('progressive_passes', models.IntegerField(default=0)),
                ('key_passes', models.IntegerField(default=0)),
                ('tackles', models.IntegerField(default=0)),
                ('interceptions', models.IntegerField(default=0)),
                ('blocks', models.IntegerField(default=0)),
                ('clearances', models.IntegerField(default=0)),
                ('pressures', models.IntegerField(default=0)),
                ('yellow_cards', models.IntegerField(default=0)),
                ('red_cards', models.IntegerField(default=0)),
                ('fouls_committed', models.IntegerField(default=0)),
                ('fouls_drawn', models.IntegerField(default=0)),
                ('aerials_won', models.IntegerField(default=0)),
                ('aerials_lost', models.IntegerField(default=0)),
                ('aerial_win_pct', models.FloatField(default=0)),
                ('dribbles_completed', models.IntegerField(default=0)),
                ('dribbles_attempted', models.IntegerField(default=0)),
                ('dribble_success_pct', models.FloatField(default=0)),
                ('saves', models.IntegerField(blank=True, null=True)),
                ('save_pct', models.FloatField(blank=True, null=True)),
                ('clean_sheets', models.IntegerField(blank=True, null=True)),
                ('goals_conceded', models.IntegerField(blank=True, null=True)),
                ('pens_saved', models.IntegerField(blank=True, null=True)),
                ('calculated_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='predictions.competition')),
                ('player', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='season_stats', to='predictions.player')),
                ('team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='player_stats', to='predictions.team')),
            ],
            options={
                'verbose_name': 'Player Statistics',
                'verbose_name_plural': 'Player Statistics',
                'db_table': 'player_stats',
            },
        ),
        migrations.CreateModel(
            name='ShotEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('minute', models.IntegerField()),
                ('result', models.CharField(choices=[('Goal', 'Goal'), ('SavedShot', 'Saved'), ('MissedShots', 'Missed'), ('BlockedShot', 'Blocked'), ('ShotOnPost', 'Hit Post')], max_length=20)),
                ('xg', models.FloatField(help_text='Expected Goal value for this shot')),
                ('x', models.FloatField(help_text='X coordinate (0-100, pitch length)')),
                ('y', models.FloatField(help_text='Y coordinate (0-100, pitch width)')),
                ('body_part', models.CharField(blank=True, choices=[('RightFoot', 'Right Foot'), ('LeftFoot', 'Left Foot'), ('Head', 'Header'), ('Other', 'Other')], max_length=20, null=True)),
                ('situation', models.CharField(blank=True, choices=[('OpenPlay', 'Open Play'), ('SetPiece', 'Set Piece'), ('Corner', 'Corner'), ('Penalty', 'Penalty'), ('FastBreak', 'Counter Attack'), ('DirectFreekick', 'Free Kick')], max_length=20, null=True)),
                ('assisted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assists_given', to='predictions.player')),
                ('match', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shot_events', to='predictions.match')),
                ('player', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='shots', to='predictions.player')),
                ('team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='shot_events', to='predictions.team')),
            ],
            options={
                'verbose_name': 'Shot Event',
                'verbose_name_plural': 'Shot Events',
                'db_table': 'shot_events',
            },
        ),
        migrations.CreateModel(
            name='TeamMarketValue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('season', models.IntegerField(db_index=True)),
                ('total_market_value_eur', models.BigIntegerField(help_text='Total squad value in EUR')),
                ('avg_player_value_eur', models.IntegerField(help_text='Average player value in EUR')),
                ('squad_size', models.IntegerField()),
                ('avg_age', models.FloatField()),
                ('foreigners_count', models.IntegerField()),
                ('transfer_income_eur', models.BigIntegerField(blank=True, null=True)),
                ('transfer_expenditure_eur', models.BigIntegerField(blank=True, null=True)),
                ('net_transfer_eur', models.BigIntegerField(blank=True, null=True)),
                ('scraped_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('competition', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='predictions.competition')),
                ('team', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='market_values', to='predictions.team')),
            ],
            options={
                'verbose_name': 'Team Market Value',
                'verbose_name_plural': 'Team Market Values',
                'db_table': 'team_market_values',
            },
        ),
        migrations.AddIndex(
            model_name='player',
            index=models.Index(fields=['team', 'position'], name='players_team_id_c98d3d_idx'),
        ),
        migrations.AddIndex(
            model_name='player',
            index=models.Index(fields=['market_value_eur'], name='players_market__15ba09_idx'),
        ),
        migrations.AddIndex(
            model_name='matchplayerstats',
            index=models.Index(fields=['match', 'team'], name='match_playe_match_i_45133d_idx'),
        ),
        migrations.AddIndex(
            model_name='matchplayerstats',
            index=models.Index(fields=['player', 'match'], name='match_playe_player__ed3fb3_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='matchplayerstats',
            unique_together={('match', 'player')},
        ),
        migrations.AddIndex(
            model_name='playerinjury',
            index=models.Index(fields=['player', 'status'], name='player_inju_player__5f2b25_idx'),
        ),
        migrations.AddIndex(
            model_name='playerinjury',
            index=models.Index(fields=['injury_date', 'expected_return_date'], name='player_inju_injury__8bc000_idx'),
        ),
        migrations.AddIndex(
            model_name='playerstats',
            index=models.Index(fields=['player', 'season'], name='player_stat_player__1eb0b1_idx'),
        ),
        migrations.AddIndex(
            model_name='playerstats',
            index=models.Index(fields=['team', 'season'], name='player_stat_team_id_928c4a_idx'),
        ),
        migrations.AddIndex(
            model_name='playerstats',
            index=models.Index(fields=['xg', 'xa'], name='player_stat_xg_59db31_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='playerstats',
            unique_together={('player', 'team', 'competition', 'season')},
        ),
        migrations.AddIndex(
            model_name='shotevent',
            index=models.Index(fields=['match', 'team'], name='shot_events_match_i_4f4ffa_idx'),
        ),
        migrations.AddIndex(
            model_name='shotevent',
            index=models.Index(fields=['player', 'match'], name='shot_events_player__c38394_idx'),
        ),
        migrations.AddIndex(
            model_name='shotevent',
            index=models.Index(fields=['xg'], name='shot_events_xg_e363be_idx'),
        ),
        migrations.AddIndex(
            model_name='teammarketvalue',
            index=models.Index(fields=['team', 'season'], name='team_market_team_id_0525a5_idx'),
        ),
        migrations.AddIndex(
            model_name='teammarketvalue',
            index=models.Index(fields=['total_market_value_eur'], name='team_market_total_m_6ff82b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='teammarketvalue',
            unique_together={('team', 'competition', 'season')},
        ),
    ]
